<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOME</title>
    
    {% load static %}
    <link href="{% static 'css/css_member/profile.css' %}" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&family=Prompt:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Taviraj:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anuphan:wght@100..700&display=swap" rel="stylesheet">
</head>

<body>

    <!-- เมนู -->
    <div class="menu-container">
        <div class="profile-section">
            <img src="{{ member_data.profile.url }}" alt="Profile Image" class="profile-image">
            <p class="username">{{ member_data.username }}</p>
            <button id="openModal" class="new-event-btn">+ New Event</button>
        </div>

        <div class="menu-items">
            <a class="menu-item home-btt " href="{% url 'feed' %}">
                <i class="fa-solid fa-earth-americas"></i>Feed
            </a>
            <a class="menu-item profile-btt active" href="{% url 'profile' %}">
                <i class="fas fa-user"></i> Profile
            </a>
            <a class="menu-item chat-btt" href="{% url 'chat' %}">
                <i class="fas fa-comment"></i> Chat
            </a>
            <a class="menu-item activity-btt " href="{% url 'my_activity' %}">
                <i class="fa-solid fa-bolt"></i></i>Activity
            </a>
        </div>


        <a href="{% url 'logout' %}" class="logout">
            Logout
        </a>
    </div>

    <div class="outer-box-profile">
        <div class="profile-header">
            <i class="fa-regular fa-circle-user"></i>
            <p class="my_profile_head">MY PROFILE</p>
        </div>
               
        <div class="inner-box">
            <div class="box-profile-show">
                

                <img src="{{ member_data.profile.url }}" alt="Profile Image" class="profile-image-show">
                
                <div class="in-box-profile-show">
                    <p class="username-profile">{{ member_data.username }}</p>
                    
                    <div class="box-age">
                        <p class="age">{{ member_data.age }}Y</p>
                    </div>

                </div>
                <p class="description-show",id="current-description">{{ user.description|default:"เพิ่มคำอธิบาย" }}</p>
            </div>

            <div class="outer-rating-box">
                <!-- <p class="rating-title">Rating</p> -->
                <div class="event-container">
                    <div class="event-summary">
                        <h3>
                            <span class="event-summary-number">{{ total_events }}</span><br>
                            <span class="event-summary-text">กิจกรรมที่สร้าง</span>
                        </h3>
                    </div>
                    <div class="event-join">
                        <h3>
                            <span class="event-summary-number">0</span><br>
                            <span class="event-summary-text">จำนวนการเข้าร่วม</span>
                        </h3>
                    </div>
                    <div class="event-rating">
                        <h3>
                            <span class="event-summary-number">0</span><br>
                            <span class="event-summary-text">คะแนน</span>
                        </h3>
                    </div>
                    <div class="event-default">
                        <h3>
                            <span class="event-summary-number">0</span><br>
                            <span class="event-summary-text">ผิดนัด</span>
                        </h3>
                    </div>
                </div>
            </div>

            <div class="content-box">
               
                <div class="profile-container">
                    <div class="profile-details">
                        <div class="head-info-user">
                            <p><i class="fa-solid fa-user"></i>ข้อมูลผู้ใช้</p>
                            <div class="box-btn-edit">
                                <button id="edit-profile-btn" class="edit-button">
                                    <i class="fa-regular fa-pen-to-square"></i> Edit <!-- ไอคอนแก้ไข -->
                                </button>   
                            </div>
                        </div>
                        
                        <p><strong>Email :</strong> {{ user.email }}</p>
                        <p><strong>Firstname :</strong> {{ user.first_name }}</p>
                        <p><strong>Lastname :</strong> {{ user.last_name }}</p>
                        <p><strong>Sex :</strong> {{ user.sex }}</p>
                        <p><strong>Birthdate :</strong> {{ user.birthdate }}</p>
                        <!-- <p><strong>คำอธิบาย:</strong> {{ user.description|default:"ยังไม่มีคำอธิบาย" }}</p> -->
                    </div>
        

                <!-- <button id="edit-profile-btn" class="edit-button">แก้ไขข้อมูล</button> -->

            <!-- ฟอร์มแก้ไขข้อมูลส่วนตัวจ้าาา -->
            <div id="edit-profile-modal" class="modal">
                <div class="modal-content">
                    <span class="close" id="close-modal">&times;</span>
                    <h1>Edit personal information</h1>
                    <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        {{ form.as_p }}
                        <button type="submit">Save</button>
                    </form> 
                </div>
            </div>

            
            
        
            
    
                </div>
        </div>
    </div>
    </div>

        <div>
            {% include 'member/notification.html' %}
        </div>


        

    <script>
        // จัดการการแสดง/ซ่อน Modal
        const modal = document.getElementById('edit-profile-modal');
        const editProfileBtn = document.getElementById('edit-profile-btn');
        const closeModal = document.getElementById('close-modal');

        // แสดง Modal เมื่อคลิกปุ่ม "แก้ไขข้อมูล"
        editProfileBtn.addEventListener('click', () => {
            modal.style.display = 'block';
        });

        // ปิด Modal เมื่อคลิกปุ่ม "x"
        closeModal.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        // ปิด Modal เมื่อคลิกนอกพื้นที่ Modal
        window.addEventListener('click', (event) => {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        });
    </script>
    
    <!-- สคริปต์สำหรับจัดการการแสดง/ซ่อน
    <script>
        const editButton = document.getElementById('edit-btn');
        const cancelButton = document.getElementById('cancel-btn');
        const descriptionDisplay = document.getElementById('description-display');
        const descriptionForm = document.getElementById('description-form');
    
        // เมื่อคลิก "แก้ไขคำอธิบาย"
        editButton.addEventListener('click', () => {
            descriptionDisplay.style.display = 'none'; // ซ่อนข้อความเดิม
            descriptionForm.style.display = 'block';  // แสดงฟอร์ม
        });
    
        // เมื่อคลิก "ยกเลิก"
        cancelButton.addEventListener('click', () => {
            descriptionForm.style.display = 'none';  // ซ่อนฟอร์ม
            descriptionDisplay.style.display = 'block'; // แสดงข้อความเดิม
        });
    </script> -->
    
</body>
</html>